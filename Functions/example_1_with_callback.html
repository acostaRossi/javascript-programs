<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises</title>
    <style>
        p {
            font-size: 40px;
        }
    </style>
</head>
<body>

    <h2>JavaScript Promise</h2>

    <p id="demo"></p>

    <script>
        function myDisplayer(some) {

            document.getElementById("demo").innerHTML += `<p>${some}</p>`;
        }

        let counter = 0;

        let fn = (callback) => {

            if(counter > 2 ) return;

            counter++;

            myDisplayer('waiting ...');

            setTimeout(() => {

                    let emoticons = 'üòçü§ëüòá';

                    let n = Math.floor(Math.random() * emoticons.length);

                    if(n % 2 == 0) {

                        let emoji = emoticons.charAt(n) + emoticons.charAt(n + 1);
                        
                        myDisplayer(emoji);

                        callback(callback);

                        return;
                    }

                    myDisplayer('‚ò† error');

                    callback(callback);

                    return;
            }, 1500);
        };
        
        fn(fn);
    </script>
</body>
</html>